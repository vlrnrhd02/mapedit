<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

        /**
         * 
         * 경기도 버스 기반 관리 
         * API 일반1 : %2BNI4x4HWsxSAZkdDHCExsoP4vitJV%2Fp8n9MOZAo6%2BD2vp419MkjvuVCaTyhVhj3UZdh8RXTiCy8yROgJooOYnA%3D%3D
         * API 일반2 : +NI4x4HWsxSAZkdDHCExsoP4vitJV/p8n9MOZAo6+D2vp419MkjvuVCaTyhVhj3UZdh8RXTiCy8yROgJooOYnA==
         * 참조 url : https://www.data.go.kr/iim/api/selectAPIAcountView.do
        */
        
        var xhr = new XMLHttpRequest();
        var url = 'http://apis.data.go.kr/6410000/baseinfoservice/getBaseInfoItem'; /*URL*/
        var queryParams = '?' + encodeURIComponent('serviceKey') + '='+'%2BNI4x4HWsxSAZkdDHCExsoP4vitJV%2Fp8n9MOZAo6%2BD2vp419MkjvuVCaTyhVhj3UZdh8RXTiCy8yROgJooOYnA%3D%3D'; /*Service Key*/
        /*
        xhr.open('GET', url + queryParams);
        xhr.onreadystatechange = function () {
            if (this.readyState == 4) {
                console.log('Status: '+this.status+'nHeaders: '+JSON.stringify(this.getAllResponseHeaders())+'nBody: '+this.responseText)
                //alert('Status: '+this.status+'nHeaders: '+JSON.stringify(this.getAllResponseHeaders())+'nBody: '+this.responseText);
            }
        };
        */
        //xhr.send('');
        // 입력 파일 내용
        /*
        전체 시군구 코드
        const inputFileContent = `CENTER_ID|AREA_ID|AREA_NAME
        47770100|01|가평군
        41270100|02|고양시
        42771400|03|과천시
        42370200|04|광명시
        46472000|05|광주시
        47170200|06|구리시
        43570100|07|군포시
        41572800|08|김포시
        47270100|09|남양주시
        48370800|10|동두천시
        42073600|11|부천시
        46170000|12|성남시
        44084101|13|수원시
        42970100|14|시흥시
        42570200|15|안산시
        45670100|16|안성시
        43172800|17|안양시
        48270900|18|양주시
        47670300|19|양평군
        46970400|20|여주군
        48670100|21|연천군
        44770100|22|오산시
        44970400|23|용인시
        43770100|24|의왕시
        48070300|25|의정부시
        46771700|26|이천시
        41371900|27|파주시
        45070200|28|평택시
        48770100|29|포천시
        46570100|30|하남시
        44570200|31|화성시
        10000000|32|서울특별시
        28000000|33|인천광역시`;
        
        // 줄바꿈 문자로 입력 파일 내용을 분할
        const lines = inputFileContent.split('\n');
        console.log(lines);
        // JSON 객체를 담을 배열
        const jsonData = [];

        // 각 줄을 파싱하여 JSON 객체로 변환
        lines.forEach(line => {
        const [centerId, areaId, areaName] = line.split('|');

        const entry = {
            CENTER_ID: centerId.trim(),
            AREA_ID: areaId.trim(),
            AREA_NAME: areaName.trim()
        };

        jsonData.push(entry);
        });

        // JSON 객체를 문자열로 변환
        const jsonString = JSON.stringify(jsonData, null, 2);

        // 변환된 JSON 출력
        console.log(jsonString);
        */

       
        /*노선 경로 정보**/
       
        
        // 줄바꿈 문자로 입력 파일 내용을 분할
        const lines = inputFileContent.split('^');
        console.log(lines);
        // JSON 객체를 담을 배열
        const jsonData = [];
        function isValueInJSON(jsonData, key, value) {
        for (let i = 0; i < jsonData.length; i++) {
            if (jsonData[i][key] && jsonData[i][key].includes(value)) {
            return true;
            }
        }
        return false;
        }
        let aa =  ['217000006'];
        // 각 줄을 파싱하여 JSON 객체로 변환
        lines.forEach(line => {
        const [ROUTE_ID,LOCATION_SEQ,LOCATION_TP,LOCATION_ID,SUB_LENGTH,SUM_LENGTH,X,Y,LINK_ID] = line.split('|');

        const entry = {
            ROUTE_ID: ROUTE_ID.trim(),
            STATION_ID: STATION_ID.trim(),
            UPDOWN: UPDOWN.trim(),
            STA_ORDER: STA_ORDER.trim(),
            ROUTE_NM: ROUTE_NM.trim(),
            STATION_NM: STATION_NM.trim(),
            
        };
        if(ROUTE_ID.includes(aa)){
            jsonData.push(entry);
        }
        
        //jsonData.push(entry);
        });
        

        // JSON 객체를 문자열로 변환
        const jsonString = JSON.stringify(jsonData, null, 2);

        // 변환된 JSON 출력
        console.log(jsonString);
        


    </script>
</body>
</html>